<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="format-detection" content="telephone=no"/>
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi"/>
  <link rel="stylesheet" type="text/css" href="css/index.css"/>
  <title>Plugins Demo</title>
    <link href="kendo/styles/kendo.indexedlistview.css" rel="stylesheet" />
    <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
    <script src="kendo/js/jquery.min.js"></script>
    <script src="kendo/js/kendo.mobile.min.js"></script>
    <script src="http://adapptalo.com/BBF/beers.js"></script>
       	
</head>
<body>
    
<div data-role="view" id="tabstrip-share" data-title="Share" data-layout="tabstrip-appearance">

<div class="app">
  <h1>Plugins Demo</h1>
  <div id="deviceready" class="blink1">
    <p class="event listening">Connecting to Device</p>
    <p class="event received">Device is Ready</p>
    <div id="pluginsDemoDiv">
      <p>
        <button onclick="socialsharingDemo()">SocialSharing</button>
      </p>
      <p>
        <button onclick="changeWebViewColor()">Make webview background green (iOS)</button>
        <input name="test" type="text" width="10" placeholder="test"/>
      </p>
      <p>
        <button onclick="calendarDemoAdd()">Calendar-add</button>
        <button onclick="calendarDemoRemove()">Calendar-del (iOS)</button>
      </p>
      <p>
        <button onclick="window.plugins.toast.showShortBottom('Hello there!', function(a){console.log('toast success: ' + a)}, function(b){alert('toast error: ' + b)})">Show a toast at the bottom</button>
      </p>
      <p>
        <button onclick="flashlightDemo()">Toggle Flashlight</button>
      </p>
      <p>
        <button onclick="sslcertificatecheckerDemo(true)">SSL check-ok</button>
        <button onclick="sslcertificatecheckerDemo(false)">SSL check-fail</button>
      </p>
      <p>
        <button onclick="videoCapturePlusDemo(true,true,5)">VideCapturePlus HQ front 5s</button>
      </p>
      <div id="video_meta_container"></div>
      <div id="video_meta_container2"></div>
      <div id="video_container"></div>
    </div>
  </div>
</div>
    
</div>
<div data-role="view" id="beers-view" data-title="BeersList" data-layout="tabstrip-appearance" data-model="viewModel"  data-show="showHomeView">
        <ul id="custom-listview" data-role="indexedlistview" data-bind="source: beersL" data-template="beers-list-template" data-fixed-headers="true"></ul>
</div>

<script id="beers-list-template" type="text/x-kendo-template">
        <a style="height:60px;" data-role="listview-link" href="\#side-inbox?alert_ID=#:B_Id#">
            <img src="Images/beers/#=IMAGEN#" class="item-photo">
            <h3 class="item-title">#=CERVESERA#</h3>
            <p class="item-info">#=CERVESA#<br>
            <small>ABV:</small>#=ABV#%
            <small> IBU:</small>#=IBU#</p>
        </a>    
</script>      
<div data-role="view" id="tabstrip-gallery" data-title="Gallery" data-layout="tabstrip-appearance">
    <ul data-role="listview" data-style="inset">
        <li><h2>Boston</h2><img src="../../content/mobile/overview/boston.jpg" /></li>
        <li><h2>Ottawa</h2><img src="../../content/mobile/overview/ottawa.jpg" /></li>
        <li><h2>San Francisco</h2><img src="../../content/mobile/overview/san-francisco.jpg" /></li>
        <li><h2>Liverpool</h2><img src="../../content/mobile/overview/liverpool.jpg" /></li>
        <li><h2>London</h2><img src="../../content/mobile/overview/london.jpg" /></li>
    </ul>
</div>

<div data-role="view" id="tabstrip-cities" data-title="Beers" data-layout="tabstrip-appearance" data-model="viewModel" class="km-insetcontent">
    <ul data-role="indexedlistview" data-bind="source: artists" data-template="artist-list-template" data-fixed-headers="true"></ul>
</div>

<div data-role="view" id="tabstrip-favourites" data-title="Favourites" data-layout="tabstrip-appearance">
    <ul data-role="listview" data-style="inset" data-type="group">
        <li>
            Favourite Cities
            <ul>
                <li data-icon="toprated"><a>Nairobi</a></li>
                <li data-icon="toprated"><a>San Francisco</a></li>
                <li data-icon="toprated"><a>Sydney</a></li>
                <li data-icon="toprated"><a>London</a></li>
            </ul>
        </li>
    </ul>
</div>

    
<div data-role="layout" data-id="tabstrip-appearance">
    <header data-role="header" id="tabstrip-appearance-header">
        <div data-role="navbar">
            <!--<a class="nav-button" data-align="left" data-role="backbutton">Back</a>-->
            <span data-role="view-title"></span>
            <a data-align="right" data-role="button" class="nav-button" href="#index">Index</a>
        </div>
    </header>

    <p>TabStrip</p>

    <div data-role="footer">
        <div data-role="tabstrip" id="custom-tabstrip">
            <a href="#tabstrip-share" data-icon="share">Share
            </a><a href="#tabstrip-gallery" data-icon="camera">Gallery
            </a><a href="#tabstrip-cities" data-icon="globe">Cities
            </a><a href="#tabstrip-favourites" data-icon="favorites">Favourites</a>
            <a href="#beers-view" data-icon="globe">Beers
            </a>
        </div>
    </div>
</div>

<style scoped>
    #custom-tabstrip,
    #tabstrip-appearance-header .km-navbar,
    #custom-tabstrip .km-state-active .km-icon,
    #tabstrip-appearance-header .km-navbar .km-button
    {
        background-color: #228b22;
    }
    
    #custom-tabstrip,
    #custom-tabstrip .km-button
    {
        background: url(img/pattern3.png);
    }
	
	#tabstrip-appearance-header .km-navbar
    {
        background: -webkit-gradient(linear, 50% 0, 50% 100%, color-stop(0, rgba(255, 255, 255, 0.5)), color-stop(0.06, rgba(255, 255, 255, 0.45)), color-stop(0.5, rgba(255, 255, 255, 0.2)), color-stop(0.5, rgba(255, 255, 255, 0.15)), color-stop(1, rgba(100, 100, 100, 0))), url(img/pattern4.png);
        background: -moz-linear-gradient(center top , rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.45) 6%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.15) 50%, rgba(100, 100, 100, 0)), url(img/pattern4.png);
	}
	
    #tabstrip-appearance-header .km-navbar .km-button
    {
        background-color: rgba(131,81,42,.4);
    }

	#tabstrip-appearance-header .km-navbar .km-view-title,
	#tabstrip-appearance-header .km-navbar .km-text
	{
        color: #83512a;
        text-shadow: 0 1px 0 #fff;
	}
   
    #custom-tabstrip .km-text,
    #custom-tabstrip .km-icon
    {
    	color: #d9be8c;
    }
    
    #custom-tabstrip .km-state-active .km-text,
    #custom-tabstrip .km-state-active .km-icon
    {
    	color: #62cb62;
        background-color: transparent;
    }

    .km-ios #tabstrip-gallery .km-listview .km-list, 
    .km-ios #tabstrip-cities .km-listview .km-list, 
    .km-ios #tabstrip-favourites .km-listview .km-list
    {
    	border: none;
    }
    
    .km-ios #custom-tabstrip .km-button:active,
    .km-ios #custom-tabstrip .km-state-active {
    	box-shadow: inset 0 0 20px #230e04;
    }
    
    #tabstrip-gallery .km-insetcontent,
    #tabstrip-cities .km-insetcontent,
    #tabstrip-favourites .km-insetcontent
    {
        color: #000;
        background: url(img/pattern4.png);
    }

    #custom-tabstrip .km-state-active
    {
        background-color: transparent;
    }

    #tabstrip-gallery h2 {
        display: inline-block;
        font-size: 1.1em;
        margin: 1em 0 1.5em 1em;
    }

    #tabstrip-gallery img {
	    float: left;
        width: 4em;
        height: 4em;
        margin: 0;
        -webkit-box-shadow: 0 1px 3px #333;
        box-shadow: 0 1px 3px #333;
        -webkit-border-radius: 8px;
        border-radius: 8px;
    }
</style>

<div data-role="view" data-title="Test app" data-layout="tabstrip-appearance" data-stretch="true" data-init="mainShow" id="index">
    <div id="map" style="border-collapse: collapse; width:100%;"></div>
</div>

    
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://cdn.kendostatic.com/2013.1.319/js/kendo.mobile.min.js"></script>
    <script src="kendo/js/kendo.indexedlistview.js"></script>

    
            <script type="text/javascript">

            var beersDataSource2 = new kendo.data.DataSource({
                    data: beers,
                    group: [{field: "FirstLetter"}],
                    schema: {
                            parse: function (data) {
                                    $.each(data, function (index, artist) {
                                            artist.FirstLetter = artist.CERVESERA.substring(0,1).toUpperCase();
                                            if(artist.FirstLetter.match(/\d/)) {
                                                    artist.FirstLetter = "#"
                                            }
                                    });
                                    return data;
                            }
                    }
            });
            var ds = beersDataSource2;

            function showDetailsView(e) {
                //alert(parseInt(e.view.params.alert_ID));
                ds.filter({
                    field: "B_Id",
                    operator: "eq",
                    value: parseInt(e.view.params.alert_ID)
                });

                ds.read();
            }
            /*localStorage.setItem('movieArray', JSON.stringify(beers));
            var retrievedMovieArray = JSON.parse(localStorage.getItem('movieArray'));*/
            
            //alert('typeof retrievedMovieArray: ' + typeof retrievedMovieArray);
            /*console.log('retrievedMovieArray:');
            for (var p in retrievedMovieArray) {
                console.log(p +'->'+ retrievedMovieArray[p].CERVESA +'|'+retrievedMovieArray[p].CERVESERA);
            }*/
            
            //var app = new kendo.mobile.Application(document.body, { hideAddressBar: true, loading: '<h1>@LL.Common.WAITING</h1>' });

            function mainShow(e) {
                var map = L.map('map');

                var greenIcon = L.icon({
                    iconUrl: 'Images/iconBBF.png',
                    //shadowUrl: 'leaf-shadow.png',
                    iconSize:     [75, 75], // size of the icon
                    //shadowSize:   [50, 64], // size of the shadow
                    iconAnchor:   [35, 75], // point of the icon which will correspond to marker's location
                    //shadowAnchor: [4, 62],  // the same for the shadow
                    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
                });
                L.marker([41.375553,2.149284], {icon: greenIcon}).addTo(map)
                            .bindPopup("<b>Barcelona Beer Festival</b><br />8, 9 y 10 de Marzo.").openPopup();

                L.tileLayer(
                  'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                  {maxZoom: 18}
                ).addTo(map);

                map.setView([41.375553,2.149284], 15);

                document.getElementById('map').style.display = 'block';

                function onLocationFound(e) {
                            var radius = e.accuracy / 2;

                            L.marker(e.latlng).addTo(map)
                                    .bindPopup("Usted est√° alrededor de " + radius + " metros de este punto").openPopup();

                            L.circle(e.latlng, radius).addTo(map);
                    }

                    function onLocationError(e) {
                            alert(e.message);
                    }
                    map.on('locationfound', onLocationFound);
                    map.on('locationerror', onLocationError);

                    //map.locate({setView: true, maxZoom: 16});
                    map.locate({setView: true, maxZoom: 16, watch: true, enableHighAccuracy: true, maximumAge: 15000, timeout: 3000000,});


                // Uncommenting  this line causes map to render properly
                map.invalidateSize();
                //setTimeout(map.invalidateSize.bind(map));
            }
        </script>
        <script type="text/javascript">
                    var artistsData = [{"ArtistId":1,"Name":"65daysofstatic"},{"ArtistId":2,"Name":"Aaron Copland & London Symphony Orchestra"},{"ArtistId":4,"Name":"Above & Beyond"},{"ArtistId":5,"Name":"Above the Fold"},{"ArtistId":8,"Name":"Adicts"},{"ArtistId":11,"Name":"Aisha Duo"},{"ArtistId":12,"Name":"Al di Meola"},{"ArtistId":14,"Name":"Alanis Morissette"},{"ArtistId":16,"Name":"Alice in Chains"},{"ArtistId":17,"Name":"Alison Krauss"},{"ArtistId":18,"Name":"Amon Amarth"},{"ArtistId":19,"Name":"Amon Tobin"},{"ArtistId":20,"Name":"Amr Diab"},{"ArtistId":23,"Name":"Anthrax"},{"ArtistId":28,"Name":"Arcade Fire"},{"ArtistId":30,"Name":"Bad Religion"},{"ArtistId":31,"Name":"Barenaked Ladies"},{"ArtistId":33,"Name":"Bee Gees"},{"ArtistId":34,"Name":"Before the Dawn"},{"ArtistId":40,"Name":"BL\u00d8F"},{"ArtistId":41,"Name":"Blues Traveler"},{"ArtistId":46,"Name":"Burial"},{"ArtistId":47,"Name":"Butch Walker & The Black Widows"},{"ArtistId":49,"Name":"Cake"},{"ArtistId":51,"Name":"Carly Rae Jepsen"},{"ArtistId":52,"Name":"Carreras, Pavarotti, Domingo"},{"ArtistId":54,"Name":"Cayouche"},{"ArtistId":56,"Name":"Chicago "},{"ArtistId":65,"Name":"Coldplay"},{"ArtistId":67,"Name":"Crosby, Stills, Nash, and Young"},{"ArtistId":68,"Name":"Daft Punk"},{"ArtistId":69,"Name":"Danielson Famile"},{"ArtistId":70,"Name":"David Bowie"},{"ArtistId":72,"Name":"David Guetta"},{"ArtistId":75,"Name":"Def Leppard"},{"ArtistId":76,"Name":"Deftones"},{"ArtistId":78,"Name":"Deva Premal"},{"ArtistId":79,"Name":"Dio"},{"ArtistId":81,"Name":"Dolly Parton"},{"ArtistId":83,"Name":"Dr. Dre"},{"ArtistId":85,"Name":"Dream Theater"},{"ArtistId":86,"Name":"Duck Sauce"},{"ArtistId":87,"Name":"Earl Scruggs"},{"ArtistId":91,"Name":"Eminem"},{"ArtistId":93,"Name":"Enya"},{"ArtistId":94,"Name":"Epica"},{"ArtistId":95,"Name":"Eric B. and Rakim"},{"ArtistId":100,"Name":"Filter"},{"ArtistId":102,"Name":"Four Tet"},{"ArtistId":106,"Name":"Garbage"},{"ArtistId":112,"Name":"Guns N' Roses"},{"ArtistId":114,"Name":"In This Moment"},{"ArtistId":116,"Name":"INXS"},{"ArtistId":117,"Name":"Iron Maiden"},{"ArtistId":118,"Name":"Jagjit Singh"},{"ArtistId":122,"Name":"Jimmy Buffett"},{"ArtistId":123,"Name":"Jimmy Smith"},{"ArtistId":125,"Name":"John Digweed"},{"ArtistId":126,"Name":"John Mayer"},{"ArtistId":129,"Name":"Journey"},{"ArtistId":132,"Name":"Justice"},{"ArtistId":134,"Name":"King Crimson"},{"ArtistId":136,"Name":"LCD Soundsystem"},{"ArtistId":137,"Name":"Le Tigre"},{"ArtistId":138,"Name":"Led Zeppelin"},{"ArtistId":142,"Name":"Limp Bizkit"},{"ArtistId":143,"Name":"Linkin Park"},{"ArtistId":144,"Name":"Live"},{"ArtistId":145,"Name":"Lokua Kanza"},{"ArtistId":147,"Name":"Los Tigres del Norte"},{"ArtistId":150,"Name":"Lura"},{"ArtistId":154,"Name":"Mark Knopfler"},{"ArtistId":156,"Name":"Massive Attack"},{"ArtistId":158,"Name":"Megadeth"},{"ArtistId":160,"Name":"Melanie Fiona"},{"ArtistId":162,"Name":"Metallica"},{"ArtistId":163,"Name":"M-Flo"},{"ArtistId":164,"Name":"Michael Bolton"},{"ArtistId":166,"Name":"Miles Davis"},{"ArtistId":168,"Name":"Mobile"},{"ArtistId":169,"Name":"Modest Mouse"},{"ArtistId":172,"Name":"Mumford & Sons"},{"ArtistId":173,"Name":"Munkle"},{"ArtistId":176,"Name":"New York Dolls"},{"ArtistId":177,"Name":"Nick Cave and the Bad Seeds"},{"ArtistId":179,"Name":"Nine Inch Nails"},{"ArtistId":180,"Name":"Nirvana"},{"ArtistId":181,"Name":"Norah Jones"},{"ArtistId":182,"Name":"Nujabes"},{"ArtistId":184,"Name":"Oasis"},{"ArtistId":186,"Name":"Opeth"},{"ArtistId":189,"Name":"Ozzy Osbourne"},{"ArtistId":190,"Name":"Paddy Casey"},{"ArtistId":192,"Name":"Papa Wemba"},{"ArtistId":194,"Name":"Paul Oakenfold"},{"ArtistId":195,"Name":"Paul Van Dyk"},{"ArtistId":196,"Name":"Pearl Jam"},{"ArtistId":197,"Name":"Pet Shop Boys"},{"ArtistId":198,"Name":"Pink Floyd"},{"ArtistId":199,"Name":"Plug"},{"ArtistId":200,"Name":"Porcupine Tree"},{"ArtistId":201,"Name":"Portishead"},{"ArtistId":202,"Name":"Prince"},{"ArtistId":203,"Name":"Projected"},{"ArtistId":204,"Name":"PSY"},{"ArtistId":205,"Name":"Public Enemy"},{"ArtistId":206,"Name":"Queen"},{"ArtistId":207,"Name":"Queensr\u00ffche"},{"ArtistId":208,"Name":"R.E.M."},{"ArtistId":209,"Name":"Radiohead"},{"ArtistId":210,"Name":"Rancid"},{"ArtistId":212,"Name":"Raunchy"},{"ArtistId":214,"Name":"Rick Ross"},{"ArtistId":215,"Name":"Robert James"},{"ArtistId":218,"Name":"Run DMC"},{"ArtistId":219,"Name":"Rush"},{"ArtistId":221,"Name":"Sara Tavares"},{"ArtistId":222,"Name":"Sarah Brightman"},{"ArtistId":227,"Name":"Sheryl Crow"},{"ArtistId":230,"Name":"Skrillex"},{"ArtistId":232,"Name":"Slayer"},{"ArtistId":237,"Name":"Stevie Ray Vaughan"},{"ArtistId":238,"Name":"Sting"},{"ArtistId":239,"Name":"Stone Temple Pilots"},{"ArtistId":240,"Name":"Styx"},{"ArtistId":241,"Name":"Sufjan Stevens"},{"ArtistId":244,"Name":"T&N"},{"ArtistId":245,"Name":"Talking Heads"},{"ArtistId":246,"Name":"Tears For Fears"},{"ArtistId":247,"Name":"Ted Nugent"},{"ArtistId":252,"Name":"The Beatles"},{"ArtistId":253,"Name":"The Black Crowes"},{"ArtistId":254,"Name":"The Black Keys"},{"ArtistId":255,"Name":"The Carpenters"},{"ArtistId":256,"Name":"The Cat Empire"},{"ArtistId":258,"Name":"The Cure"},{"ArtistId":259,"Name":"The Decemberists"},{"ArtistId":261,"Name":"The Eagles of Death Metal"},{"ArtistId":262,"Name":"The Go! Team"},{"ArtistId":263,"Name":"The Head and the Heart"},{"ArtistId":264,"Name":"The Jezabels"},{"ArtistId":266,"Name":"The Lumineers"},{"ArtistId":267,"Name":"The Offspring"},{"ArtistId":270,"Name":"The Prodigy"},{"ArtistId":272,"Name":"The Rubberbandits"},{"ArtistId":273,"Name":"The Smashing Pumpkins"},{"ArtistId":274,"Name":"The Stone Roses"},{"ArtistId":275,"Name":"The Who"},{"ArtistId":276,"Name":"Them Crooked Vultures"},{"ArtistId":277,"Name":"TheStart"},{"ArtistId":278,"Name":"Thievery Corporation"},{"ArtistId":279,"Name":"Ti\u00ebsto"},{"ArtistId":282,"Name":"Tool"},{"ArtistId":283,"Name":"Tori Amos"},{"ArtistId":284,"Name":"Trampled By Turtles"},{"ArtistId":285,"Name":"Trans-Siberian Orchestra"},{"ArtistId":286,"Name":"Tygers of Pan Tang"},{"ArtistId":287,"Name":"U2"},{"ArtistId":289,"Name":"Uh Huh Her "},{"ArtistId":290,"Name":"Van Halen"},{"ArtistId":293,"Name":"Venus Hum"},{"ArtistId":294,"Name":"Vicente Fernandez"},{"ArtistId":296,"Name":"Weezer"},{"ArtistId":297,"Name":"Weird Al"},{"ArtistId":298,"Name":"Wendy Carlos"},{"ArtistId":300,"Name":"Yano"},{"ArtistId":302,"Name":"Yes"},{"ArtistId":305,"Name":"\u05d0\u05e8\u05d9\u05e7 \u05d0\u05d9\u05e0\u05e9\u05d8\u05d9\u05d9\u05df"}];

                    var artistsDataSource = new kendo.data.DataSource({
                            data: artistsData,
                            group: [{field: "FirstLetter"}],
                            schema: {
                                    parse: function (data) {
                                            $.each(data, function (index, artist) {
                                                    artist.FirstLetter = artist.Name.substring(0,1).toUpperCase();
                                                    if(artist.FirstLetter.match(/\d/)) {
                                                            artist.FirstLetter = "#"
                                                    }
                                            });
                                            return data;
                                    }
                            }
                    });

                    var beersDataSource = new kendo.data.DataSource({
                            data: beers,
                            group: [{field: "FirstLetter"}],
                            schema: {
                                    parse: function (data) {
                                            $.each(data, function (index, artist) {
                                                    artist.FirstLetter = artist.CERVESERA.substring(0,1).toUpperCase();
                                                    if(artist.FirstLetter.match(/\d/)) {
                                                            artist.FirstLetter = "#"
                                                    }
                                            });
                                            return data;
                                    }
                            }
                    });

                    var viewModel = kendo.observable({
                            artists: artistsDataSource,
                            beersL: beersDataSource
                    });

                    //var app = new kendo.mobile.Application(document.body);

                    // this just fixes a glitch in this demo page.
                    // not needed in real Kendo Mobile use.
                    //setTimeout(function () {$(".km-indexedlistview").data("kendoMobileIndexedListView").refresh();}, 1);
                    function showHomeView(e) {
                        //alert("showHomeView");
                        setTimeout(function () {$(".km-indexedlistview").data("kendoMobileIndexedListView").refresh();}, 1);
                    }

            </script>
            

<script type="text/javascript" src="phonegap.js"></script>

<!-- plugins -->
<script src="js/plugins/Flashlight.js"></script>

<!-- plugins demo -->
<script src="js/socialsharing-plugin-demo.js"></script>
<script src="js/calendar-plugin-demo.js"></script>
<script src="js/flashlight-plugin-demo.js"></script>
<script src="js/sslcertificatechecker-plugin-demo.js"></script>
<script src="js/webview-background-color-plugin-demo.js"></script>
<script src="js/videocaptureplus-plugin-demo.js"></script>

<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
  app.initialize();

  // this is for the LaunchMyApp plugin
  function handleOpenURL(url) {
    setTimeout(function() {
      alert("LaunchMyApp plugin received url: " + url);
    }, 0);
  }

  window.onerror = function(a,b,c) {
    alert(a + "; " + b + "; " + c);
  }
</script>

</body>
</html>